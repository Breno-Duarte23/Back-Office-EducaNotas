<div class="home-container">
        <h1>Bem-vindo!</h1>
        <div class="actions">
            <button (click)="abrirModal('usuario')">Cadastrar Usu√°rio</button>
            <button (click)="abrirModal('aluno')">Cadastrar Aluno</button>
            <button (click)="abrirModal('turma')">Cadastrar turma</button>
            <button (click)="baixarRelatorioAlunos()">Baixar relat√≥rio de alunos e seus respons√°veis</button>
            <button (click)="baixarRelatorioFuncionarios()">Baixar relat√≥rio de funcion√°rios e suas fun√ß√µes</button>
            <button (click)="baixarRelatorioAlunosPorTurma()">Baixar relat√≥rio de alunos por turma</button>
        </div>
        <div *ngIf="mensagemErro" class="mensagem erro">{{ mensagemErro }}</div>
        <div *ngIf="mensagemSucesso" class="mensagem sucesso">{{ mensagemSucesso }}</div>

        <!-- Modal de Cadastro de Usu√°rio -->
        <div class="modal-backdrop" *ngIf="modalAberto === 'usuario'">
            <div class="modal">
                <h2>Cadastrar Usu√°rio</h2>
                <form [formGroup]="formUsuario" (ngSubmit)="enviarCadastroUsuario()">
                    <label>
                        Nome:
                        <input formControlName="name" />
                    </label>
                    <label>
                        E-mail:
                        <input formControlName="email" type="email" />
                    </label>
                    <label>
                        Senha:
                        <input formControlName="password" type="password" />
                    </label>
                    <label>
                        Confirmar Senha:
                        <input formControlName="confirmPassword" type="password" />
                    </label>
                    <label>
                        Perfil:
                        <select formControlName="role">
                            <option *ngFor="let r of roles" [value]="r.value">{{ r.label }}</option>
                        </select>
                    </label>
                    <div *ngIf="mensagemErro" class="mensagem erro">{{ mensagemErro }}</div>
                    <div *ngIf="mensagemSucesso" class="mensagem sucesso">{{ mensagemSucesso }}</div>
                    <button type="submit" [disabled]="formUsuario.invalid">Salvar</button>
                    <button type="button" (click)="fecharModal()">Cancelar</button>
                </form>
            </div>
        </div>

        <!-- Modal de Cadastro de Aluno -->
        <div class="modal-backdrop" *ngIf="modalAberto === 'aluno'">
            <div class="modal">
                <h2>Cadastrar Aluno</h2>
                <form [formGroup]="formAluno" (ngSubmit)="enviarCadastroAluno()">
                    <label>
                        Nome:
                        <input formControlName="nome" />
                    </label>
                    <label>
                        Idade:
                        <input formControlName="idade" type="number" />
                    </label>
                    <label>
                        Respons√°vel:
                        <select formControlName="responsavelId">
                            <option *ngFor="let r of responsaveis" [value]="r.id">{{ r.name }}</option>
                        </select>
                    </label>
                    <label>
                        Professor:
                        <select formControlName="professorId">
                            <option *ngFor="let t of professores" [value]="t.id">{{ t.name }}</option>
                        </select>
                    </label>
                    <label>
                        Turma:
                        <select formControlName="turmaId">
                            <option *ngFor="let t of turmas" [value]="t.id">{{ t.name }}</option>
                        </select>
                    </label>
                    <button type="submit" [disabled]="formAluno.invalid">Salvar</button>
                    <button type="button" (click)="fecharModal()">Cancelar</button>
                </form>
            </div>
        </div>

        <!-- Modal de Cadastro de Turma -->
        <div class="modal-backdrop" *ngIf="modalAberto === 'turma'">
            <div class="modal">
                <h2>Cadastrar Turma</h2>
                <form [formGroup]="formTurma" (ngSubmit)="enviarCadastroTurma()">
                    <label>
                        Nome da Turma:
                        <input formControlName="nome" />
                    </label>
                    <label>
                        Professor:
                        <select formControlName="professorId">
                            <option *ngFor="let t of professores" [value]="t.id">{{ t.name }}</option>
                        </select>
                    </label>
                    <button type="submit" [disabled]="formTurma.invalid">Salvar</button>
                    <button type="button" (click)="fecharModal()">Cancelar</button>
                </form>
            </div>
        </div>

        <!-- Bot√£o Calend√°rio de Feriados -->
        <button (click)="abrirModal('calendario')" class="btn-calendario">
          üìÖ Ver Feriados
        </button>

        <!-- Modal Calend√°rio -->
        <div *ngIf="modalAberto === 'calendario'" class="modal-overlay" (click)="fecharModal()">
          <div class="modal" (click)="$event.stopPropagation()">
            <h2>Calend√°rio de Feriados - {{ anoSelecionado }}</h2>
            
            <div class="controles-ano">
              <button (click)="mudarAno(-1)">‚óÄ Ano Anterior</button>
              <span>{{ anoSelecionado }}</span>
              <button (click)="mudarAno(1)">Pr√≥ximo Ano ‚ñ∂</button>
            </div>

            <div *ngIf="carregandoFeriados" class="loading">Carregando feriados...</div>

            <div *ngIf="!carregandoFeriados && feriados.length > 0" class="lista-feriados">
              <div *ngFor="let feriado of feriados" class="feriado-item">
                <div class="feriado-data">{{ formatarData(feriado) }}</div>
                <div class="feriado-nome">{{ feriado.name }}</div>
                <div class="feriado-descricao">{{ feriado.description }}</div>
              </div>
            </div>

            <div *ngIf="!carregandoFeriados && feriados.length === 0" class="sem-feriados">
              Nenhum feriado encontrado para {{ anoSelecionado }}.
            </div>

            <button (click)="fecharModal()" class="btn-fechar">Fechar</button>
          </div>
        </div>
    </div>